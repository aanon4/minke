
#
# Network setup assumed already created a bridge on the host
#
#docker network create --driver=bridge --subnet=192.168.11.0/24 --gateway=192.168.11.15 -o "com.docker.network.bridge.name=br0" --aux-address="DefaultGatewayIPv4=192.168.11.1" home
#

#docker build -t registry.gitlab.com/minkebox/minke .

MINKE_IP=192.168.11.14
docker container rm minke
docker run --name minke -d --privileged \
  -v /home/minke/etc/timezone:/etc/timezone \
  -v /var/run/docker.sock:/var/run/docker.sock \
  --mount type=bind,source=/home/minke/fs,target=/minke/fs,bind-propagation=rshared \
  --mount type=bind,source=/home/minke/db,target=/minke/db,bind-propagation=rshared \
  --mount type=bind,source=${PWD}/app/skeletons/local,target=/app/skeletons/local,bind-propagation=rshared \
  --network=home --ip=${MINKE_IP} \
  registry.gitlab.com/minkebox/minke

